<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <meta name="theme-color" content="#e4e1e2" />
    <meta name="apple-mobile-web-app-capable" content="yes" />
    <meta name="apple-mobile-web-app-status-bar-style" content="default" />
    <meta name="apple-mobile-web-app-title" content="Geeky Punks Converter" />
    <title>Geeky Punks converter</title>
    <link rel="manifest" href="./manifest.webmanifest" />
    <link rel="apple-touch-icon" href="./icons/icon-192.png" />
    <link rel="stylesheet" href="../resources/styles.css" />
    <link rel="stylesheet" href="./web-app.css" />
  </head>
  <body>
    <main class="app-shell">
      <header class="brand-head">
        <img src="../resources/icons/geeky-punks-logo.svg" alt="Geeky Punks logo" class="brand-logo" />
        <div class="brand-text">
          <h1>Geeky Punks converter</h1>
          <p>The Sound of Everything</p>
        </div>
      </header>

      <section class="panel panel-main">
        <h2>Sample converter for Erica Synths instruments</h2>
        <p class="copy">For Erica Synths users, we made a simple sample converter. Drop in any audio file, hit convert, and you get machine ready samples in seconds.</p>

        <div class="control-row">
          <button id="pickFilesBtn" class="btn btn-primary" type="button">Import Audio</button>
          <button id="clearFilesBtn" class="btn btn-secondary" type="button">Clear</button>
          <button id="manualBtn" class="btn btn-secondary" type="button">Manual</button>
          <button id="installAppBtn" class="btn btn-secondary" type="button" hidden>Install App</button>
          <button id="pickWebOutputBtn" class="btn btn-secondary" type="button" hidden>Choose Output Folder</button>
        </div>

        <p id="outputHint" class="hint"></p>

        <div class="action-row">
          <button id="startBtn" class="btn btn-primary" type="button" disabled>Convert Files</button>
          <label class="toggle-wrap" for="normalizeToggle">
            <input id="normalizeToggle" type="checkbox" />
            <span>Normalize</span>
          </label>
        </div>
        <div class="kit-maker-row">
          <button id="kitMakerBtn" class="btn btn-secondary" type="button" disabled>Kit Maker</button>
        </div>
        <p class="kit-maker-help">Makes one Bullfrog Drums kit folder. Numbers your samples 0 to 9.</p>
        <p id="kitMakerWarning" class="kit-maker-warning" hidden>Kit Maker supports up to 10 samples. Please select 10 or fewer.</p>
        <p class="format-chip">TARGET: MONO / 48KHZ / 16-BIT WAV</p>
        <p id="fileCount" class="copy">0 files selected</p>
        <div id="progressWrap" class="progress-wrap" hidden>
          <div id="progressLine" class="progress-line" role="progressbar" aria-valuemin="0" aria-valuemax="100" aria-valuenow="0">
            <div id="progressBar" class="progress-bar"></div>
          </div>
          <p id="progressText" class="progress-text">Processing...</p>
        </div>
        <p id="statusText" class="status-text">Ready.</p>
      </section>

      <section class="panel download-panel">
        <h2>Downloads</h2>
        <p class="copy">Exports from this session.</p>
        <ul id="exportList" class="export-list" aria-live="polite">
          <li class="export-empty" data-export-empty>No exports yet.</li>
        </ul>
        <p class="copy copy-builds">Desktop app builds.</p>
        <div class="download-grid">
          <a id="recommendedDownloadBtn" class="btn btn-primary" href="./downloads/Geeky-Punks-converter-mac-arm64-v1.0.11.dmg" download>
            Download for macOS
          </a>
          <a class="btn btn-secondary" href="./downloads/index.html">All Downloads</a>
        </div>
        <p id="recommendedDownloadHint" class="download-meta"></p>
        <p class="download-meta">
          Need macOS Universal/Intel? Use
          <a href="./downloads/index.html">All Downloads</a>.
        </p>
      </section>
    </main>

    <div id="conflictModal" class="modal" hidden>
      <div class="modal-card" role="dialog" aria-modal="true" aria-labelledby="conflictTitle">
        <h3 id="conflictTitle">Output file already exists</h3>
        <p id="conflictText"></p>
        <div class="modal-actions">
          <button type="button" class="btn btn-primary" data-decision="overwrite-current">Overwrite current</button>
          <button type="button" class="btn btn-primary" data-decision="overwrite-all">Overwrite all</button>
          <button type="button" class="btn btn-secondary" data-decision="skip">Skip</button>
          <button type="button" class="btn btn-secondary" data-decision="cancel">Cancel</button>
        </div>
      </div>
    </div>

    <div id="manualModal" class="modal" hidden>
      <div class="modal-card manual-card" role="dialog" aria-modal="true" aria-label="Manual">
        <button id="manualCloseBtn" class="btn btn-secondary modal-close" type="button" aria-label="Close manual">X</button>
        <pre class="manual-text">===========================
GEEKY PUNKS CONVERTER
THE SOUND OF EVERYTHING
===========================

Manual

Convert Files
Import audio, optional Normalize, then Convert Files.
Output: WAV files saved to your output folder or downloads.

Kit Maker
Select up to 10 files, then Kit Maker.
Output: one folder H with samples numbered 0 to 9.

Install on macOS
Open the DMG, drag the app to Applications, then open it.
If macOS blocks it: System Settings → Privacy & Security → Open Anyway.</pre>
      </div>
    </div>

    <input id="webFileInput" class="file-input-native" type="file" multiple accept="audio/*" />

    <script src="./pwa.js"></script>
    <script type="module" src="../resources/js/main.js"></script>
  </body>
</html>
